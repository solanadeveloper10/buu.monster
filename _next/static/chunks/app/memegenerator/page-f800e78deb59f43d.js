(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[573],{38292:function(e,t,r){Promise.resolve().then(r.bind(r,6670))},6670:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var i=r(57437),l=r(2265),n=r(87138);let a=e=>{let{onStickerSelect:t,canvasRef:r,resetSelection:n,resetAll:a}=e,[s,c]=(0,l.useState)([]),[o,h]=(0,l.useState)(null),[d,u]=(0,l.useState)(new Set);(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/stickers"),t=await e.json();c(t)}catch(e){console.error("Error fetching stickers:",e)}})()},[]),(0,l.useEffect)(()=>{n&&h(null)},[n]),(0,l.useEffect)(()=>{a&&h(null)},[a]);let f=e=>{u(t=>new Set(t).add(e))},g=e=>{let i=r.current;if(i){let r=i.getContext("2d");r&&r.clearRect(0,0,i.width,i.height),t(e,{x:i.width/2-50,y:i.height/2-50},{width:100,height:100},0),h(e)}};return(0,i.jsx)("div",{className:"sticker-selector w-full bg-[#1E1E1E]",children:(0,i.jsx)("div",{className:"wrapper-selector p-3 w-full grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-5 gap-2 justify-center",children:s.map((e,t)=>(0,i.jsxs)("div",{className:"sticker-item aspect-square m-2 cursor-pointer ".concat(o===e?"border-2 border-[#FB6030]":""),onClick:()=>g(e),children:[!d.has(e)&&(0,i.jsx)("div",{className:"w-full h-full bg-[#2A2A2A] animate-pulse"}),(0,i.jsx)("img",{src:e,alt:"Sticker ".concat(t+1),className:"w-full h-full object-contain ".concat(d.has(e)?"":"hidden"),onLoad:()=>f(e)})]},t))})})},s=e=>{let{onTextSelect:t,onAddText:r,onRemoveText:n,hasText:a,isCanvasLoading:s,resetAll:c}=e,[o,h]=(0,l.useState)([]),[d,u]=(0,l.useState)(new Set),[f,g]=(0,l.useState)(null),[x,w]=(0,l.useState)(""),[m,p]=(0,l.useState)("#FFFFFF"),[A,b]=(0,l.useState)(50);(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/addtext"),t=await e.json();h(t)}catch(e){console.error("Error fetching text options:",e)}})()},[]);let v=e=>{u(t=>new Set(t).add(e))},E=e=>{t(e),g(e)};return(0,l.useEffect)(()=>{c&&(w(""),p("#FFFFFF"),b(50))},[c]),(0,i.jsxs)("div",{className:"text-selector w-full bg-[#1E1E1E]",children:[(0,i.jsxs)("div",{className:"text-input-area p-3",children:[(0,i.jsx)("input",{type:"text",value:x,onChange:e=>{w(e.target.value)},placeholder:"Enter your text here",className:"w-full p-2 mb-2 text-black"}),(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[(0,i.jsx)("input",{type:"color",value:m,onChange:e=>{p(e.target.value)},className:"mr-2"}),(0,i.jsx)("span",{className:"text-white",children:"Select text color"})]}),(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[(0,i.jsx)("input",{type:"range",min:"20",max:"100",value:A,onChange:e=>{b(Number(e.target.value))},className:"mr-2",style:{accentColor:"#FB6030"}}),(0,i.jsxs)("span",{className:"text-white",children:["Text size: ",A,"px"]})]}),(0,i.jsx)("button",{onClick:()=>{""!==x.trim()&&(r(x,m,A),w(""))},className:"bg-[#FB6030] text-[#1E1E1E] px-4 py-2 font-bold w-full mb-2",children:"Insert Text"}),a&&(0,i.jsx)("button",{onClick:n,className:"bg-red-500 text-white px-4 py-2 font-bold w-full",children:"Remove Text"})]}),(0,i.jsx)("div",{className:"wrapper-selector p-3 w-full grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-5 gap-2 justify-center",children:o.map((e,t)=>(0,i.jsxs)("div",{className:"text-item aspect-square m-2 cursor-pointer ".concat(f===e?"border-2 border-[#FB6030]":""," ").concat(s?"pointer-events-none opacity-50":""),onClick:()=>E(e),children:[!d.has(e)&&(0,i.jsx)("div",{className:"w-full h-full bg-[#2A2A2A] animate-pulse"}),(0,i.jsx)("img",{src:e,alt:"Text ".concat(t+1),className:"w-full h-full object-contain ".concat(d.has(e)?"":"hidden"),onLoad:()=>v(e)})]},t))})]})};var c=r(52890),o=r.n(c),h=r(34374),d=r(22170),u=r.n(d);function f(){var e,t;let[r,c]=(0,l.useState)(null),[d,f]=(0,l.useState)("sticker"),[g,x]=(0,l.useState)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==");(0,l.useRef)(null);let w=(0,l.useRef)(null),[m,p]=(0,l.useState)(null),A=(0,l.useRef)(null),b=(0,l.useRef)(null),[v,E]=(0,l.useState)(null),[y,j]=(0,l.useState)(!1),[N,C]=(0,l.useState)(!1),[S,k]=(0,l.useState)({width:0,height:0}),[F,R]=(0,l.useState)(!1),B=(0,l.useRef)(g),z=(0,l.useRef)(m),O=(0,l.useRef)(v);(0,l.useEffect)(()=>{B.current=g,z.current=m,O.current=v},[g,m,v]);let M=(0,l.useCallback)(u()(()=>{k({width:window.innerWidth,height:window.innerHeight}),I()},250),[]);(0,l.useEffect)(()=>(M(),window.addEventListener("resize",M),()=>{window.removeEventListener("resize",M),M.cancel()}),[M]);let I=(0,l.useCallback)(()=>{if(A.current&&b.current&&w.current){let e=w.current,t=e.clientWidth,r=e.clientHeight;requestAnimationFrame(()=>{A.current.width=t,A.current.height=r,b.current.width=t,b.current.height=r,T(),Q(),U()})}},[]),T=(0,l.useCallback)(()=>{let e=A.current;if(!e)return;let t=e.getContext("2d",{alpha:!1});if(!t)return;let r=new Image;r.crossOrigin="anonymous",r.onload=()=>{requestAnimationFrame(()=>{let i=Math.max(e.width/r.width,e.height/r.height),l=r.width*i,n=r.height*i,a=(e.width-l)/2,s=(e.height-n)/2;t.drawImage(r,a,s,l,n)})},r.src=B.current},[]),Q=(0,l.useCallback)(()=>{let e=b.current;if(!e||!z.current)return;let t=e.getContext("2d");if(!t)return;let r=new Image;r.crossOrigin="anonymous",r.onload=()=>{requestAnimationFrame(()=>{t.clearRect(0,0,e.width,e.height),t.save(),t.translate(z.current.x+z.current.width/2,z.current.y+z.current.height/2),t.rotate(z.current.rotation*Math.PI/180),t.drawImage(r,-z.current.width/2,-z.current.height/2,z.current.width,z.current.height),t.restore()})},r.src=z.current.url},[]),U=(0,l.useCallback)(()=>{let e=b.current;if(!e||!O.current)return;let t=e.getContext("2d");t&&requestAnimationFrame(()=>{if(t.clearRect(0,0,e.width,e.height),z.current){let e=new Image;e.crossOrigin="anonymous",e.onload=()=>{t.save(),t.translate(z.current.x+z.current.width/2,z.current.y+z.current.height/2),t.rotate(z.current.rotation*Math.PI/180),t.drawImage(e,-z.current.width/2,-z.current.height/2,z.current.width,z.current.height),t.restore()},e.src=z.current.url}t.font="bold ".concat(O.current.size,"px Arial"),t.fillStyle=O.current.color,t.textBaseline="middle",t.textAlign="center";let r=O.current.x+O.current.width/2,i=O.current.y+O.current.height/2;t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowBlur=4,t.shadowOffsetX=2,t.shadowOffsetY=2,t.fillText(O.current.content,r,i),t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0})},[]);(0,l.useEffect)(()=>{T()},[g,T]),(0,l.useEffect)(()=>{Q()},[m,Q]),(0,l.useEffect)(()=>{U()},[v,U]);let L=(e,t)=>{if(!m)return;let r=b.current;if(!r)return;let i=r.width-m.width,l=r.height-m.height;p({...m,x:Math.max(0,Math.min(e,i)),y:Math.max(0,Math.min(t,l))})},D=e=>{if(!m)return;let t=m.width/m.height,r=e.width,i=e.height;Math.abs(r-m.width)>Math.abs(i-m.height)?i=r/t:r=i*t,p({...m,width:r,height:i})},J=e=>{if(f(e),p(null),E(null),j(!0),b.current){let e=b.current.getContext("2d");e&&e.clearRect(0,0,b.current.width,b.current.height)}x("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg=="),T()},q=(e,t)=>{v&&E(r=>r?{...r,x:e,y:t}:r)},Y=e=>{if(!v)return;let t=v.width/v.height,r=e.width,i=e.height;Math.abs(r-v.width)>Math.abs(i-v.height)?i=r/t:r=i*t,E(e=>e?{...e,width:r,height:i}:e)},G=e=>{if(v){e.font="bold ".concat(v.size,"px Arial"),e.fillStyle=v.color,e.textBaseline="middle",e.textAlign="center";let t=v.x+v.width/2,r=v.y+v.height/2;e.shadowColor="rgba(0, 0, 0, 0.5)",e.shadowBlur=4,e.shadowOffsetX=2,e.shadowOffsetY=2,e.fillText(v.content,t,r),e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}};return(0,l.useEffect)(()=>{F&&R(!1)},[F]),(0,i.jsx)("div",{id:"meme-generator",children:(0,i.jsx)("section",{className:"flex justify-center items-center h-[99dvh] lg:h-[100dvh] lg:min-h-full md:h-[99dvh] md:min-h-full overflow-y-auto bg-[#EAE4CA]",children:(0,i.jsxs)("div",{className:"wrapper-main-container h-full lg:h-[100dvh] md:h-[100dvh] w-full bg-[#EAE4CA] max-w-[1440px] flex flex-col items-center",children:[(0,i.jsx)("div",{className:"button-back-area w-full flex justify-start p-[25px]",children:(0,i.jsx)(n.default,{href:"/",className:"bg-[#FB6030] text-[#1E1E1E] px-6 py-2 font-bold hover:scale-90 w-[fit-content] flex items-center justify-center transition duration-300 text-[24px]",children:"BACK TO HOME"})}),(0,i.jsxs)("div",{className:"wrapper-generator w-full flex flex-col lg:flex-row md:flex-row p-[25px] gap-[25px]",children:[(0,i.jsxs)("div",{className:"left-side w-[-webkit-fill-available] lg:w-[500px] md:w-[500px] h-fit flex flex-col gap-4",children:[(0,i.jsxs)("div",{ref:w,className:"container-canvas relative w-full aspect-square max-w-[500px] max-h-[500px] border-4 border-[#1E1E1E] overflow-hidden",style:{width:"100%",height:"100%"},children:[(0,i.jsx)("canvas",{ref:A,className:"absolute top-0 left-0",style:{width:"100%",height:"100%"}}),(0,i.jsx)("canvas",{ref:b,className:"absolute top-0 left-0",style:{width:"100%",height:"100%"}}),m&&(0,i.jsx)(o(),{position:{x:m.x,y:m.y},onDrag:(e,t)=>L(t.x,t.y),bounds:"parent",children:(0,i.jsx)(h.e,{size:{width:m.width,height:m.height},onResizeStop:(e,t,r,i)=>D({width:m.width+i.width,height:m.height+i.height}),maxWidth:(null===(e=b.current)||void 0===e?void 0:e.width)?b.current.width-m.x:void 0,maxHeight:(null===(t=b.current)||void 0===t?void 0:t.height)?b.current.height-m.y:void 0,handleStyles:{top:{cursor:"ns-resize"},right:{cursor:"ew-resize"},bottom:{cursor:"ns-resize"},left:{cursor:"ew-resize"},topRight:{cursor:"nesw-resize"},bottomRight:{cursor:"nwse-resize"},bottomLeft:{cursor:"nesw-resize"},topLeft:{cursor:"nwse-resize"}},children:(0,i.jsx)("div",{style:{width:"100%",height:"100%",opacity:.5,cursor:"move",border:"2px dashed #fff",backgroundColor:"rgba(0, 0, 0, 0.3)"}})})}),v&&(0,i.jsx)(o(),{position:{x:v.x,y:v.y},onDrag:(e,t)=>q(t.x,t.y),bounds:"parent",children:(0,i.jsx)(h.e,{size:{width:v.width,height:v.height},onResizeStop:(e,t,r,i)=>Y({width:v.width+i.width,height:v.height+i.height}),minWidth:v.width,minHeight:v.height,handleStyles:{top:{cursor:"ns-resize"},right:{cursor:"ew-resize"},bottom:{cursor:"ns-resize"},left:{cursor:"ew-resize"},topRight:{cursor:"nesw-resize"},bottomRight:{cursor:"nwse-resize"},bottomLeft:{cursor:"nesw-resize"},topLeft:{cursor:"nwse-resize"}},children:(0,i.jsx)("div",{style:{width:"100%",height:"100%",fontFamily:"Arial, sans-serif",fontWeight:"bold",fontSize:"".concat(v.size,"px"),color:v.color,display:"flex",alignItems:"center",justifyContent:"center",cursor:"move",userSelect:"none",textShadow:"2px 2px 4px rgba(0,0,0,0.5)",border:"2px dashed #fff",backgroundColor:"rgba(0, 0, 0, 0.3)",overflow:"hidden",whiteSpace:"nowrap"},children:v.content})})}),N&&(0,i.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,i.jsx)("div",{className:"loader animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-[#FB6030]"})})]}),(0,i.jsxs)("div",{className:"upload-area w-full",children:[(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){let e=new FileReader;e.onload=e=>{var t;x(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(r)}},className:"hidden",id:"image-upload",disabled:N}),(0,i.jsx)("label",{htmlFor:"image-upload",className:"bg-[#1E1E1E] text-[#FFFFFF] px-6 py-2 w-full font-bold hover:scale-90 flex items-center justify-center transition duration-300 text-[24px] cursor-pointer ".concat(N?"opacity-50 cursor-not-allowed":""),children:"Upload Image"})]}),(0,i.jsx)("div",{className:"reset-area w-full",children:(0,i.jsx)("button",{onClick:()=>{if(x("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg=="),p(null),E(null),b.current){let e=b.current.getContext("2d");e&&e.clearRect(0,0,b.current.width,b.current.height)}if(A.current){let e=A.current.getContext("2d");e&&e.clearRect(0,0,A.current.width,A.current.height)}T(),j(!0),R(!0),f("sticker")},className:"bg-[#1E1E1E] text-[#FFFFFF] px-6 py-2 w-full font-bold hover:scale-90 flex items-center justify-center transition duration-300 text-[24px] ".concat(N?"opacity-50 cursor-not-allowed":""),disabled:N,children:"Reset All"})}),(0,i.jsx)("div",{className:"download-area w-full",children:(0,i.jsx)("button",{onClick:()=>{let e=A.current,t=b.current;if(!e||!t)return;let r=document.createElement("canvas");r.width=e.width,r.height=e.height;let i=r.getContext("2d");if(!i)return;i.drawImage(e,0,0),i.drawImage(t,0,0),G(i);let l=r.toDataURL("image/png"),n=document.createElement("a");n.download="meme.png",n.href=l,n.click()},className:"bg-[#FB6030] text-[#1E1E1E] px-6 py-2 w-full font-bold hover:scale-90 flex items-center justify-center transition duration-300 text-[24px] ".concat(N?"opacity-50 cursor-not-allowed":""),disabled:N,children:"Download MEME"})})]}),(0,i.jsxs)("div",{className:"right-side flex-col flex gap-[25px] w-[-webkit-fill-available]",children:[(0,i.jsxs)("div",{className:"switch-area flex flex-row gap-4 w-full",children:[(0,i.jsx)("button",{className:"px-6 py-2 w-fit font-bold flex items-center justify-center transition duration-300 text-[24px] ".concat("sticker"===d?"bg-[#FB6030] text-[#1E1E1E]":"bg-[transparent] text-[#1E1E1E]"),onClick:()=>J("sticker"),children:"Sticker"}),(0,i.jsx)("button",{className:"px-6 py-2 w-fit font-bold flex items-center justify-center transition duration-300 text-[24px] ".concat("text"===d?"bg-[#FB6030] text-[#1E1E1E]":"bg-[transparent] text-[#1E1E1E]"),onClick:()=>J("text"),children:"Add Text"})]}),(0,i.jsx)("div",{className:"content-addon-area w-[-webkit-fill-available] h-[-webkit-fill-available] max-h-[450px] overflow-y-auto custom-scrollbar",children:"sticker"===d?(0,i.jsx)(a,{onStickerSelect:(e,t,r,i)=>{let l=b.current;if(l){let e=l.getContext("2d");e&&e.clearRect(0,0,l.width,l.height)}p({url:e,x:t.x,y:t.y,width:r.width,height:r.height,rotation:i})},canvasRef:b,resetSelection:y,resetAll:F}):(0,i.jsx)(s,{onTextSelect:e=>{C(!0);let t=new Image;t.crossOrigin="anonymous",t.onload=()=>{x(e),C(!1)},t.onerror=()=>{console.error("Error loading image"),C(!1)},t.src=e},onAddText:(e,t,r)=>{let i=document.createElement("canvas").getContext("2d");if(i){i.font="bold ".concat(r,"px Arial");let l=i.measureText(e);E({id:Date.now().toString(),content:e,x:0,y:0,width:l.width+20,height:r+10,color:t,size:r})}},onRemoveText:()=>{E(null)},hasText:null!==v,isCanvasLoading:N,resetAll:F})})]})]})]})})})}}},function(e){e.O(0,[138,675,971,23,744],function(){return e(e.s=38292)}),_N_E=e.O()}]);